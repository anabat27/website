"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[8675],{56189:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"project/2025/genan.omer/index","title":"WaveScope","description":"An embedded device that captures, modulates and filters audio from an electret microphone for signal analysis.","source":"@site/versioned_docs/version-fils_en/project/2025/genan.omer/index.md","sourceDirName":"project/2025/genan.omer","slug":"/project/2025/genan.omer/","permalink":"/docs/fils_en/project/2025/genan.omer/","draft":false,"unlisted":false,"editUrl":"https://www.github.com/upb-pmrust/website/edit/main/website/versioned_docs/version-fils_en/project/2025/genan.omer/index.md","tags":[],"version":"fils_en","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Educational PID Demonstration","permalink":"/docs/fils_en/project/2025/gabriela.alexa/"},"next":{"title":"Project Name","permalink":"/docs/fils_en/project/2025/george.apostol1107/"}}');var n=i(74848),s=i(28453);const a={},l="WaveScope",o={},d=[{value:"Description",id:"description",level:2},{value:"Motivation",id:"motivation",level:2},{value:"Architecture",id:"architecture",level:2},{value:"Log",id:"log",level:2},{value:"Week 21 April - 28 April",id:"week-21-april---28-april",level:3},{value:"Week 28 April - 4 May",id:"week-28-april---4-may",level:3},{value:"Week 5 - 11 May",id:"week-5---11-may",level:3},{value:"Week 12 - 18 May",id:"week-12---18-may",level:3},{value:"Week 19 - 25 May",id:"week-19---25-may",level:3},{value:"Hardware",id:"hardware",level:2},{value:"Schematics",id:"schematics",level:3},{value:"Bill of Materials",id:"bill-of-materials",level:3},{value:"Software",id:"software",level:2},{value:"Links",id:"links",level:2}];function c(e){const t={a:"a",admonition:"admonition",br:"br",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.header,{children:(0,n.jsx)(t.h1,{id:"wavescope",children:"WaveScope"})}),"\n",(0,n.jsx)(t.p,{children:"An embedded device that captures, modulates and filters audio from an electret microphone for signal analysis."}),"\n",(0,n.jsx)(t.admonition,{type:"info",children:(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Author"}),": Omer Genan ",(0,n.jsx)(t.br,{}),"\n",(0,n.jsx)(t.strong,{children:"GitHub Project Link"}),": ",(0,n.jsx)(t.a,{href:"https://github.com/UPB-PMRust-Students/project-genan2003",children:"https://github.com/UPB-PMRust-Students/project-genan2003"})]})}),"\n",(0,n.jsx)(t.h2,{id:"description",children:"Description"}),"\n",(0,n.jsxs)(t.p,{children:["This device is designed for audio signal processing, showcasing two fundamental principles in the field: modulation and filtering. It captures sound from an electret microphone (",(0,n.jsx)(t.strong,{children:"MAX4466"}),") and applies digital signal processing techniques to clean and manipulate the signal. Specifically, it utilizes a biquad filter for frequency-based filtering and a Kalman filter for dynamic noise reduction and signal smoothing. All processing and computations are carried out by the microcontroller unit (",(0,n.jsx)(t.strong,{children:"NUCLEO-STM32F767ZI"}),"), which is equipped with a double-precision floating-point unit to efficiently perform mathematical functions using floating-point values. Once processed, the data is transmitted to a computer for visualization, including real-time audio feedback and plotting."]}),"\n",(0,n.jsx)(t.h2,{id:"motivation",children:"Motivation"}),"\n",(0,n.jsx)(t.p,{children:"I chose this project because I have always been passionate about control theory and digital signal processing. These fields are fundamental to understanding how we can analyze, modify, and control the signals that surround us in everyday life \u2014 from audio and video to data transmission and sensor measurements. I believe it's important for every engineer to understand how signals work and how we can shape them using mathematical tools."}),"\n",(0,n.jsx)(t.p,{children:"Beyond the technical interest, I see mathematics as a form of art. This project gives me the opportunity to explore that artistic side by offering both visual and audio interpretations of mathematical concepts."}),"\n",(0,n.jsx)(t.h2,{id:"architecture",children:"Architecture"}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"Schematic Diagram",src:i(51483).A+""})}),"\n",(0,n.jsx)(t.p,{children:"Main components:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"NUCLEO-STM32F767ZI"})," will handle all computations and signal processing, then send the processed data via USB to the laptop. This allows the user to both listen to the processed signal (a recording) and view plots to observe the differences before and after processing."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"MAX4466"})," will capture sound from the user and send the signal through a GPIO pin with ADC capability. Since it's an analog sensor, the analog signal must be converted into a digital format for processing."]}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:"User interface:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Button"})," will be used to manually start the recording, preventing memory overflow that could occur if the board continuously recorded audio."]}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:"Feedback:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"LEDs"})," will indicate whether the device is currently recording."]}),"\n"]}),"\n",(0,n.jsx)(t.h2,{id:"log",children:"Log"}),"\n",(0,n.jsx)(t.h3,{id:"week-21-april---28-april",children:"Week 21 April - 28 April"}),"\n",(0,n.jsx)(t.p,{children:"I began by studying how the MAX4466 behaves and tried to find a suitable gain setting for it by connecting it to the board and printing the output values to the terminal."}),"\n",(0,n.jsx)(t.h3,{id:"week-28-april---4-may",children:"Week 28 April - 4 May"}),"\n",(0,n.jsx)(t.p,{children:"I implemented USB data transmission to a Python script that listens to the port where the board is connected. I then tried to analyze how the raw audio from the microphone sounds and also plotted the data received from the microcontroller."}),"\n",(0,n.jsx)(t.h3,{id:"week-5---11-may",children:"Week 5 - 11 May"}),"\n",(0,n.jsx)(t.p,{children:"I implemented a Kalman filter and started analyzing the processed data. From what I observe, further processing is necessary. While the Kalman filter performs well, I also want to remove the DC offset in the signal. So, I changed my strategy and added a slow low-pass filter to eliminate the DC offset. This combination currently works well alongside the Kalman filter. However, I still need to work on improving the processing and filtering even further."}),"\n",(0,n.jsx)(t.h3,{id:"week-12---18-may",children:"Week 12 - 18 May"}),"\n",(0,n.jsx)(t.p,{children:"After several attempts using only a slow low-pass filter and a tuned Kalman filter, I think it's time to switch to a biquad filter. So, I implemented a biquad filter (a low-pass and a high-pass filter cascaded). I also started using the Kalman filter for smoothing, and the results are better than before. The next step is to analyze the audio signal under varying noise conditions."}),"\n",(0,n.jsx)(t.h3,{id:"week-19---25-may",children:"Week 19 - 25 May"}),"\n",(0,n.jsx)(t.h2,{id:"hardware",children:"Hardware"}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"Hardware",src:i(61636).A+"",width:"1024",height:"472"})}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"NUCLEO-STM32F767ZI"})," will serve as the main computational and signal processing unit, and will also function as a transmitter to the computer."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"MAX4466"})," will act as the sensor from which audio signals will be received."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Red Button"})," will be used to trigger the raw recording."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Blue Button"})," will be used to trigger the processed recording."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Blue LED"})," will provide visual feedback for the timer during the processed recording"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Red LED"})," will provide visual feedback for the timer during the raw recording"]}),"\n"]}),"\n",(0,n.jsx)(t.h3,{id:"schematics",children:"Schematics"}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"KiCAD Schematic",src:i(63957).A+"",width:"1123",height:"794"})}),"\n",(0,n.jsx)(t.h3,{id:"bill-of-materials",children:"Bill of Materials"}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{children:"Device"}),(0,n.jsx)(t.th,{children:"Usage"}),(0,n.jsx)(t.th,{children:"Price"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.a,{href:"https://www.st.com/en/microcontrollers-microprocessors/stm32f7-series/documentation.html",children:"NUCLEO-STM32F767ZI"})}),(0,n.jsx)(t.td,{children:"The microcontroller"}),(0,n.jsx)(t.td,{children:(0,n.jsx)(t.a,{href:"https://ro.mouser.com/ProductDetail/STMicroelectronics/NUCLEO-F767ZI?qs=7UaJ5Mrpeu0%2F%252BMRranB3%2Fw%3D%3D",children:"113.26 RON"})})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.a,{href:"https://cdn-shop.adafruit.com/datasheets/MAX4465-MAX4469.pdf",children:"MAX4466"})}),(0,n.jsx)(t.td,{children:"Microphone"}),(0,n.jsx)(t.td,{children:(0,n.jsx)(t.a,{href:"https://sigmanortec.ro/modul-microfon-max4466-cu-amplificare-castig-reglabil-23-5vdc",children:"8.54 RON"})})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.a,{href:"https://www.optimusdigital.ro/ro/butoane-i-comutatoare/1114-buton-cu-capac-rotund-rou.html",children:"Buttons"})}),(0,n.jsx)(t.td,{children:"Controlling the recording"}),(0,n.jsx)(t.td,{children:(0,n.jsx)(t.a,{href:"https://www.optimusdigital.ro/ro/butoane-i-comutatoare/1114-buton-cu-capac-rotund-rou.html",children:"1.99 RON"})})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.a,{href:"https://www.optimusdigital.ro/ro/kituri-optimus-digital/9517-set-de-led-uri-asortate-de-5-mm-si-3-mm-310-buc-cu-rezistoare-bonus.html?search_query=leduri&results=59",children:"LEDs and resistors"})}),(0,n.jsx)(t.td,{children:"Indicator for the recording"}),(0,n.jsx)(t.td,{children:(0,n.jsx)(t.a,{href:"https://www.optimusdigital.ro/ro/kituri-optimus-digital/9517-set-de-led-uri-asortate-de-5-mm-si-3-mm-310-buc-cu-rezistoare-bonus.html?search_query=leduri&results=59",children:"26.99 RON"})})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.a,{href:"https://www.optimusdigital.ro/ro/fire-fire-mufate/878-set-fire-mama-tata-40p-30-cm.html?search_query=fire&results=429",children:"Wires female-male"})}),(0,n.jsx)(t.td,{children:"Connecting the components"}),(0,n.jsx)(t.td,{children:(0,n.jsx)(t.a,{href:"https://www.optimusdigital.ro/ro/fire-fire-mufate/878-set-fire-mama-tata-40p-30-cm.html?search_query=fire&results=429",children:"9.99 RON"})})]})]})]}),"\n",(0,n.jsx)(t.h2,{id:"software",children:"Software"}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{children:"Library"}),(0,n.jsx)(t.th,{children:"Description"}),(0,n.jsx)(t.th,{children:"Usage"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.a,{href:"https://github.com/embassy-rs/embassy",children:"embassy-stm32"})}),(0,n.jsx)(t.td,{children:"Async Rust embedded framework"}),(0,n.jsx)(t.td,{children:"Used for interacting with the peripherals"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.a,{href:"https://crates.io/crates/bytemuck",children:"bytemuck"})}),(0,n.jsx)(t.td,{children:"A crate for mucking around with piles of bytes."}),(0,n.jsx)(t.td,{children:"Used for safe casting"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.a,{href:"https://crates.io/crates/libm",children:"libm"})}),(0,n.jsx)(t.td,{children:"A Rust implementations of the C math library."}),(0,n.jsx)(t.td,{children:"Used in the computations in filtering"})]})]})]}),"\n",(0,n.jsx)(t.h2,{id:"links",children:"Links"}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.a,{href:"https://os.mbed.com/platforms/ST-Nucleo-F767ZI/",children:"NUCLEO-F767ZI pinout"})}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}},51483:(e,t,i)=>{i.d(t,{A:()=>r});const r=i.p+"assets/images/Diagram-6b2e715c77e198be2c77332aa09c7576.svg"},61636:(e,t,i)=>{i.d(t,{A:()=>r});const r=i.p+"assets/images/InitialHardware-8bf6716225378f375f82be37e944b478.webp"},63957:(e,t,i)=>{i.d(t,{A:()=>r});const r=i.p+"assets/images/MicroprocessorsArchitectureSchematic-3b71f9eb930a9321f82e4389388f34ef.svg"},28453:(e,t,i)=>{i.d(t,{R:()=>a,x:()=>l});var r=i(96540);const n={},s=r.createContext(n);function a(e){const t=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:a(e.components),r.createElement(s.Provider,{value:t},e.children)}}}]);